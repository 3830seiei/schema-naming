# naming_dictionary.yaml
# [JA] このファイルは命名辞書の正本です。各プロジェクトは固定バージョンで参照し、
#      Lint/CIにより命名規約違反（禁止語・旧語など）を検出します。
# [EN] This file is the single source of truth for naming. Projects pin a version,
#      and CI/Lint enforce the rules (forbidden terms, legacy aliases, etc).
---
version: "0.1.0"
updated_at: "2025-09-11"

about:
  ja: |
    この辞書は、テーブル名・カラム名・制約名・n:n パターン・禁止語・語彙を
    一元管理します。YAMLが正本で、CSV/Markdown/HTMLは生成物です。
  en: |
    This dictionary centralizes table/column/constraint names, n:n patterns,
    forbidden terms, and controlled vocabulary. YAML is the source of truth.

legend:
  id:          { ja: "エントリ識別子（ユニーク）", en: "Unique entry identifier" }
  kind:        { ja: "種別（entity/attribute/pattern/codebook/suffix）", en: "Entry type" }
  canonical:   { ja: "正規名（en/ja）", en: "Canonical names (en/ja)" }
  synonyms:    { ja: "許容別名（ドキュメント上）", en: "Allowed synonyms (docs only)" }
  forbidden:   { ja: "禁止語（Lint対象）", en: "Disallowed terms (lint target)" }
  lint:        { ja: "Lint規則（命名パターン/正規表現など）", en: "Lint rules (patterns/regex)" }

terms:
  - id: MEDICAL_FACILITY
    kind: entity
    canonical: { en: medical_facility, ja: 医療機関 }
    synonyms:  { en: [hospital, clinic], ja: [病院, クリニック] }
    forbidden: [facility]   # 医療の意味では使わない
    lint:
      pk_name: medical_facility_id
      fk_name_pattern: "{{ref_table}}_id"

  - id: MEDICAL_EQUIPMENT
    kind: entity
    canonical: { en: medical_equipment, ja: 医療機器 }
    synonyms:  { en: [equipment, device], ja: [機器, デバイス] }
    forbidden: [medical_entity, entity]
    lint:
      pk_name: medical_equipment_id
      fk_name_pattern: "{{ref_table}}_id"

  - id: N_TO_N_TABLE
    kind: pattern
    canonical: { en: "map_<a>__<b>", ja: "map_<a>__<b>" }
    forbidden: ["*_link"]   # PoCのみ許容。Productでは禁止
    lint:
      table_name_regex: "^map_[a-z0-9_]+__[_a-z0-9]+$"

  - id: PRIMARY_KEY_STYLE
    kind: pattern
    canonical: { en: "<table_short>_id", ja: "<table_short>_id" }

  - id: TIMESTAMP_STYLE
    kind: pattern
    canonical: { en: "*_at / *_on", ja: "*_at / *_on" }

  - id: AUDIT_COLUMNS
    kind: pattern
    canonical: { en: "created_at/created_by/updated_at/updated_by", ja: 同左 }
